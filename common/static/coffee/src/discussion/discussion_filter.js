// Generated by CoffeeScript 1.6.1
(function() {

  this.DiscussionFilter = (function() {

    function DiscussionFilter() {}

    DiscussionFilter.filterDrop = function(e) {
      var $drop, $items, query;
      $drop = $(e.target).parents('.topic-menu-wrapper');
      query = $(e.target).val();
      $items = $drop.find('.topic-menu-item');
      if (query.length === 0) {
        $items.removeClass('hidden');
        return;
      }
      $items.addClass('hidden');
      return $items.each(function(i) {
        var path, pathText, pathTitles;
        path = $(this).parents(".topic-menu-item").andSelf();
        pathTitles = path.children(".topic-title").map(function(i, elem) {
          return $(elem).text();
        }).get();
        pathText = pathTitles.join(" / ").toLowerCase();
        if (query.split(" ").every(function(term) {
          return pathText.search(term.toLowerCase()) !== -1;
        })) {
          $(this).removeClass('hidden');
          $(this).find('.topic-menu-item').removeClass('hidden');
          return $(this).parents('.topic-menu-item').removeClass('hidden');
        }
      });
    };

    return DiscussionFilter;

  })();

}).call(this);
